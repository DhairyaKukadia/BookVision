<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BookVision - Analysis Result</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .custom-scrollbar::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    .custom-scrollbar::-webkit-scrollbar-track {
      background: #f1f5f9; 
      border-radius: 10px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: #94a3b8; 
      border-radius: 10px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: #64748b; 
    }
    .alert {
        border-radius: 0.5rem;
        padding: 1rem;
        margin-bottom: 1rem;
        font-size: 0.875rem;
        border-width: 1px;
    }
    .alert-success {
        background-color: #d1fae5;
        border-color: #6ee7b7;
        color: #065f46;
    }
    .alert-error {
        background-color: #fee2e2;
        border-color: #fca5a5;
        color: #991b1b;
    }
    .alert-warning {
        background-color: #fef3c7;
        border-color: #fcd34d;
        color: #92400e;
    }
    .alert-info {
        background-color: #e0f2fe;
        border-color: #7dd3fc;
        color: #0c4a6e;
    }
  </style>
</head>
<body class="bg-slate-100 py-8 px-4">

  <div class="container mx-auto max-w-3xl bg-white p-6 md:p-10 rounded-xl shadow-2xl">
    <div class="text-center mb-8">
        <div class="inline-flex items-center justify-center w-16 h-16 mb-4 bg-blue-600 rounded-full text-white">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
        </div>
      <h1 class="text-2xl md:text-3xl font-bold text-slate-800">Analysis Result</h1>
      {% if original_filename %}
        <p class="text-slate-600 mt-1">Results for: <span class="font-medium text-slate-700">{{ original_filename }}</span></p>
      {% endif %}
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category|lower }}" role="alert">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="mb-8">
      <h2 class="text-xl font-semibold text-slate-700 mb-3 flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />
        </svg>
        Extracted Text
      </h2>
      <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 max-h-96 overflow-y-auto custom-scrollbar">
        <pre class="whitespace-pre-wrap text-sm text-slate-700">{{ text }}</pre>
      </div>
    </div>

    <div class="mb-8">
      <h2 class="text-xl font-semibold text-slate-700 mb-3 flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h7" />
        </svg>
        Summary
      </h2>
      <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 max-h-72 overflow-y-auto custom-scrollbar">
        <pre class="whitespace-pre-wrap text-sm text-slate-700">{{ summary }}</pre>
      </div>
    </div>

    <div class="mb-10">
      <h2 class="text-xl font-semibold text-slate-700 mb-3 flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        Sentiment Analysis
      </h2>
      <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
        {% set sentiment_class = "text-slate-700 bg-slate-200" %}
        {% if sentiment == "Positive" %}
            {% set sentiment_class = "text-green-700 bg-green-100" %}
        {% elif sentiment == "Negative" %}
            {% set sentiment_class = "text-red-700 bg-red-100" %}
        {% elif sentiment == "Neutral" %}
            {% set sentiment_class = "text-sky-700 bg-sky-100" %}
        {% endif %}
        <p class="text-lg font-medium px-3 py-2 rounded-md inline-block {{ sentiment_class }}">
          {{ sentiment }}
        </p>
      </div>
    </div>

    <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
      {% if download_path %}
        <a href="{{ url_for('download_file', filename=download_path) }}" 
           class="w-full sm:w-auto flex items-center justify-center px-6 py-3 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-150 ease-in-out">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
          </svg>
          Download ({{ download_path.split('.')[-1].upper() if '.' in download_path else 'FILE' }})
        </a>
      {% endif %}
      <a href="{{ url_for('index') }}" 
         class="w-full sm:w-auto flex items-center justify-center px-6 py-3 border border-slate-300 rounded-lg shadow-sm text-base font-medium text-slate-700 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-150 ease-in-out">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 10h10a8 8 0 018 8v2M3 10l6.39 6.39a2 2 0 002.83-2.83L3 10z" />
        </svg>
        Analyze Another File
      </a>
    </div>
  </div>
</body>
</html>
